{"version":3,"sources":["webpack:///./src/components/HabitLog.vue","webpack:///src/components/HabitLog.vue","webpack:///./src/components/HabitLog.vue?2cec","webpack:///./~/date-streak/index.js","webpack:///./src/components/HabitLog.vue?1d6e","webpack:///./src/components/HabitLog.vue?3877"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA,yBAAgT;AAChT;AACA;AACA;AACA;AACA;AACgP;AAChP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuBA;AACA;AACA;AACA;;AAEA;UAEA;0BACA;eACA;AACA;;;AAGA;AAFA;;sCAIA;+CACA;iEACA;;;4BACA;;AACA;kCACA;qCACA;;wBACA;;;sCACA;oCACA;qDACA;AACA;AACA;0CACA;;;uBACA;;uGACA;AAEA;AAlBA;;kDAoBA;sFACA;AACA;qDACA;iDACA;wBACA;uBACA;AACA;yBACA;AACA;+DACA;6GACA;AACA;+DACA;+BACA;mHACA;AACA;AAEA;AAnBA;AA3BA,G;;;;;;;ACnDA;AACA;;;AAGA;AACA,6DAA8D,YAAY,4BAA4B,aAAa,uBAAuB,mBAAmB,2BAA2B,eAAe,6BAA6B,YAAY,2BAA2B,YAAY,WAAW,QAAQ,iVAAiV,mBAAmB,GAAG,+BAA+B,oBAAoB,8BAA8B,0BAA0B,GAAG,8BAA8B,sBAAsB,GAAG,gCAAgC,mBAAmB,GAAG,8BAA8B,mBAAmB,kBAAkB,GAAG,qBAAqB;;AAEv8B;;;;;;;;;ACPA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACjDA;;AAEA;AACA,qCAAoP;AACpP;AACA;AACA;AACA,iE;;;;;;;;ACPA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iBAAiB;AACjB,kE","file":"static/js/0.3af6f82f6e032fdf371c.js","sourcesContent":["function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e63f6ad\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HabitLog.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HabitLog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e63f6ad\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HabitLog.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6e63f6ad\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HabitLog.vue\n// module id = 290\n// module chunks = 0","<template>\n  <div class=\"page\">\n    <md-whiteframe v-if=\"filtered.length\" md-tag=\"section\" md-elevation=\"8\">\n        <md-list>\n            <md-list-item>\n                {{ $t('titles.allItems') }} {{ filtered.length }}\n            </md-list-item>\n            <md-list-item v-if=\"streakInfo.isCurrentlyOnStreak\">\n                {{ $t('titles.currentStreak') }} {{ streakInfo.lengthOfTheLastStreak }}\n            </md-list-item>\n            <md-list-item v-if=\"!streakInfo.isCurrentlyOnStreak\">\n                {{ $t('titles.lastStreak') }} {{ streakInfo.lengthOfTheLastStreak }}\n            </md-list-item>\n        </md-list>\n    </md-whiteframe>\n    <div v-if=\"!filtered.length\" class=\"no-data-screen\">\n        <div>\n            <Icon className :size=\"50\">\n                <IconUpdate />\n            </Icon>\n        </div>\n        <div>{{ $t(\"text.nolog\") }}</div>\n    </div>\n    <md-list v-if=\"filtered.length\">\n        <md-list-item v-for=\"(log, index) in filtered\" :key=\"index\">\n            <md-avatar>\n                <div class=\"log-item\" @click=\"editHabitIncrement(log.id)\">{{ log.amount }}</div>\n            </md-avatar>\n            <div class=\"md-list-text-container\">\n                <span>{{ getHabitName(log.habitId) }} <a class=\"edit-log\" @click=\"editHabitIncrement(log.id)\">\n                    <Icon>\n                        <IconCreate />\n                    </Icon>\n                </a></span>\n                <p>{{ formatDate(log.date) }}</p>\n            </div>\n        </md-list-item>\n    </md-list>\n\n    <EmptyCard v-if=\"filtered.length\" :visibility=\"Boolean($route.query.habitId)\" :onClick=\"addHabitIncrement($route.query.habitId)\" />\n  </div>\n</template>\n\n<script>\n\nimport EmptyCard from '@/components/EmptyCard';\nimport moment from 'moment';\nimport router from '../router';\nimport { determineStreak } from 'date-streak';\n\nexport default {\n    name: 'habit-log',\n    data() {\n        return {};\n    },\n    components: {\n        EmptyCard\n    },\n    computed: {\n        filtered() {\n            let queryHabit = this.$route.query.habitId;\n            if (queryHabit === undefined || queryHabit === null) {\n                return this.$store.state.log.filter(({ destroy }) => !destroy);\n            }\n            queryHabit = parseInt(queryHabit);\n            return this.$store.state.log\n                .filter(({ destroy }) => !destroy)\n                .filter(({ habitId }) => queryHabit === habitId)\n                .sort((a, b) => {\n                    return new Date(b.date) - new Date(a.date);\n                });\n        },\n        streakInfo() {\n            const dates = this.filtered.map(({ date }) => date);\n            return determineStreak(dates);\n        }\n    },\n    methods: {\n        formatDate(dateTime) {\n            return moment(new Date(dateTime)).calendar();\n        },\n        getHabitName(habitId) {\n            const habit = this.$store.state.habits[habitId];\n            if (!habit) {\n                return '';\n            }\n            return habit.name;\n        },\n        editHabitIncrement(logId) {\n            router.push({ name: 'increment-edit', query: { logId } });\n        },\n        addHabitIncrement(habitId) {\n            return () => {\n                router.push({ name: 'habit-increment', params: { habitId } });\n            };\n        }\n    }\n};\n\n</script>\n\n<style scoped>\n.md-whiteframe-8dp {\n    margin: 15px;\n}\n.md-avatar {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.log-item {\n    font-size: 25px;\n}\n.empty-card {\n    margin: 20px;\n}\n\n.edit-log {\n    float: right;\n    opacity: .4;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HabitLog.vue?0e0f8950","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".md-whiteframe-8dp[data-v-6e63f6ad]{margin:15px}.md-avatar[data-v-6e63f6ad]{display:flex;justify-content:center;align-items:center}.log-item[data-v-6e63f6ad]{font-size:25px}.empty-card[data-v-6e63f6ad]{margin:20px}.edit-log[data-v-6e63f6ad]{float:right;opacity:.4}\", \"\", {\"version\":3,\"sources\":[\"/Users/dkunin/Projects/habitology/src/components/HabitLog.vue\"],\"names\":[],\"mappings\":\"AACA,oCACI,WAAa,CAChB,AACD,4BACI,aAAc,AACd,uBAAwB,AACxB,kBAAoB,CACvB,AACD,2BACI,cAAgB,CACnB,AACD,6BACI,WAAa,CAChB,AACD,2BACI,YAAa,AACb,UAAY,CACf\",\"file\":\"HabitLog.vue\",\"sourcesContent\":[\"\\n.md-whiteframe-8dp[data-v-6e63f6ad] {\\n    margin: 15px;\\n}\\n.md-avatar[data-v-6e63f6ad] {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n}\\n.log-item[data-v-6e63f6ad] {\\n    font-size: 25px;\\n}\\n.empty-card[data-v-6e63f6ad] {\\n    margin: 20px;\\n}\\n.edit-log[data-v-6e63f6ad] {\\n    float: right;\\n    opacity: .4;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6e63f6ad\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/HabitLog.vue\n// module id = 303\n// module chunks = 0","'use strict';\n\nconst todayBegingOfTheDay = new Date();\nconst todayEndingOfTheDay = new Date();\ntodayBegingOfTheDay.setHours(0);\ntodayBegingOfTheDay.setMinutes(0);\ntodayEndingOfTheDay.setHours(23);\ntodayEndingOfTheDay.setMinutes(59);\n\nfunction determineStreak(dateArray) {\n    const normalizeDates = dateArray\n        .filter(Boolean)\n        .map(singleDate => new Date(singleDate).getTime())\n        .sort()\n        .reverse();\n\n    const lastStreak = normalizeDates.reduce(\n        (newArrayOfStreaks, singleItem) => {\n            const currentItem = new Date(singleItem).getDay();\n            let prevNumber =\n                new Date(\n                    newArrayOfStreaks[newArrayOfStreaks.length - 1]\n                ).getDay() - 1 || 0;\n            if (prevNumber < 0) {\n                prevNumber = 6;\n            }\n\n            if (!newArrayOfStreaks.length || prevNumber === currentItem) {\n                return newArrayOfStreaks.concat(singleItem);\n            }\n\n            return newArrayOfStreaks;\n        },\n        []\n    );\n\n    const isThereAToday = lastStreak.some(\n        singleDay =>\n            singleDay < todayEndingOfTheDay && singleDay > todayBegingOfTheDay\n    );\n\n    return {\n        isCurrentlyOnStreak: isThereAToday,\n        lengthOfTheLastStreak: lastStreak.length\n    };\n}\n\nmodule.exports = {\n    determineStreak\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-streak/index.js\n// module id = 305\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e63f6ad\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./HabitLog.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"1ee1a21d\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6e63f6ad\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/HabitLog.vue\n// module id = 310\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"page\"\n  }, [(_vm.filtered.length) ? _c('md-whiteframe', {\n    attrs: {\n      \"md-tag\": \"section\",\n      \"md-elevation\": \"8\"\n    }\n  }, [_c('md-list', [_c('md-list-item', [_vm._v(\"\\n              \" + _vm._s(_vm.$t('titles.allItems')) + \" \" + _vm._s(_vm.filtered.length) + \"\\n          \")]), _vm._v(\" \"), (_vm.streakInfo.isCurrentlyOnStreak) ? _c('md-list-item', [_vm._v(\"\\n              \" + _vm._s(_vm.$t('titles.currentStreak')) + \" \" + _vm._s(_vm.streakInfo.lengthOfTheLastStreak) + \"\\n          \")]) : _vm._e(), _vm._v(\" \"), (!_vm.streakInfo.isCurrentlyOnStreak) ? _c('md-list-item', [_vm._v(\"\\n              \" + _vm._s(_vm.$t('titles.lastStreak')) + \" \" + _vm._s(_vm.streakInfo.lengthOfTheLastStreak) + \"\\n          \")]) : _vm._e()], 1)], 1) : _vm._e(), _vm._v(\" \"), (!_vm.filtered.length) ? _c('div', {\n    staticClass: \"no-data-screen\"\n  }, [_c('div', [_c('Icon', {\n    attrs: {\n      \"className\": \"\",\n      \"size\": 50\n    }\n  }, [_c('IconUpdate')], 1)], 1), _vm._v(\" \"), _c('div', [_vm._v(_vm._s(_vm.$t(\"text.nolog\")))])]) : _vm._e(), _vm._v(\" \"), (_vm.filtered.length) ? _c('md-list', _vm._l((_vm.filtered), function(log, index) {\n    return _c('md-list-item', {\n      key: index\n    }, [_c('md-avatar', [_c('div', {\n      staticClass: \"log-item\",\n      on: {\n        \"click\": function($event) {\n          _vm.editHabitIncrement(log.id)\n        }\n      }\n    }, [_vm._v(_vm._s(log.amount))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"md-list-text-container\"\n    }, [_c('span', [_vm._v(_vm._s(_vm.getHabitName(log.habitId)) + \" \"), _c('a', {\n      staticClass: \"edit-log\",\n      on: {\n        \"click\": function($event) {\n          _vm.editHabitIncrement(log.id)\n        }\n      }\n    }, [_c('Icon', [_c('IconCreate')], 1)], 1)]), _vm._v(\" \"), _c('p', [_vm._v(_vm._s(_vm.formatDate(log.date)))])])], 1)\n  })) : _vm._e(), _vm._v(\" \"), (_vm.filtered.length) ? _c('EmptyCard', {\n    attrs: {\n      \"visibility\": Boolean(_vm.$route.query.habitId),\n      \"onClick\": _vm.addHabitIncrement(_vm.$route.query.habitId)\n    }\n  }) : _vm._e()], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e63f6ad\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/HabitLog.vue\n// module id = 316\n// module chunks = 0"],"sourceRoot":""}